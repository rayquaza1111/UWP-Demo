<Page
    x:Class="UWP_Demo.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer>
        <StackPanel Margin="24" Spacing="24">
            
            <!-- ?? NATIVE UWP: Modern header with proper typography -->
            <StackPanel Spacing="8">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <Border Background="{ThemeResource AccentFillColorDefaultBrush}"
                            CornerRadius="6"
                            Width="40"
                            Height="40">
                        <SymbolIcon Symbol="Setting" 
                                    Foreground="White"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center" />
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="Settings" 
                                   FontSize="28" 
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                        <TextBlock Text="Customize your experience and test app features" 
                                   FontSize="14" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>

            <!-- ?? THEME SECTION: Native UWP card design -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                
                <StackPanel Spacing="20">
                    <!-- ?? Section Header with Palette Icon -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon Glyph="&#xE790;" 
                                  FontSize="20" 
                                  Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="Appearance" 
                                   FontSize="20" 
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                   VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- ?? Theme Toggle Section -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock Text="App Theme" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                            <TextBlock Text="Switch between light and dark appearance" 
                                       FontSize="14" 
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>

                        <ToggleSwitch x:Name="SimpleThemeToggle"
                                      Grid.Column="1"
                                      OnContent="Dark"
                                      OffContent="Light"
                                      Toggled="SimpleThemeToggle_Toggled"
                                      VerticalAlignment="Center" />
                    </Grid>

                    <!-- ?? Quick Theme Toggle Button -->
                    <Button x:Name="QuickToggle"
                            Click="QuickToggle_Click"
                            HorizontalAlignment="Center"
                            Style="{ThemeResource AccentButtonStyle}"
                            Padding="20,10">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE945;" FontSize="16" />
                            <TextBlock Text="Quick Toggle" FontSize="14" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>

            <!-- 6. Suspension & Resume Handling: SUSPENSION & RESUME SECTION -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                
                <StackPanel Spacing="20">
                    <!-- Section Header with Clock Icon -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon Glyph="&#xE823;" 
                                  FontSize="20" 
                                  Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="App Lifecycle Testing" 
                                   FontSize="20" 
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                   VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- Info Display -->
                    <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="6"
                            Padding="16">
                        <StackPanel Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE946;" 
                                          FontSize="16" 
                                          Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                                <TextBlock Text="Suspension Information" 
                                           FontSize="14" 
                                           FontWeight="SemiBold"
                                           Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                            </StackPanel>
                            
                            <TextBlock x:Name="SuspensionStatus"
                                       Text="Loading suspension info..."
                                       FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       TextWrapping="Wrap"
                                       Margin="24,0,0,0" />
                        </StackPanel>
                    </Border>

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
                        <Button x:Name="RefreshSuspensionInfo"
                                Click="RefreshSuspensionInfo_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Padding="16,8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <SymbolIcon Symbol="Refresh" />
                                <TextBlock Text="Refresh Info" />
                            </StackPanel>
                        </Button>
                        
                        <Button x:Name="TestSuspensionMessage"
                                Click="TestSuspensionMessage_Click"
                                Style="{ThemeResource AccentButtonStyle}"
                                Padding="16,8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE7C1;" FontSize="16" />
                                <TextBlock Text="Test Welcome (30s)" />
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Instructions InfoBar -->
                    <muxc:InfoBar Title="How to Test Suspension"
                                  Message="Minimize the app (Windows+D or minimize button) ? Wait a few seconds ? Restore the app (click on taskbar)"
                                  Severity="Informational"
                                  IsOpen="True"
                                  IsClosable="False">
                        <muxc:InfoBar.IconSource>
                            <muxc:FontIconSource Glyph="&#xE946;" />
                        </muxc:InfoBar.IconSource>
                    </muxc:InfoBar>
                </StackPanel>
            </Border>

            <!-- ?? STATE MANAGEMENT SECTION: Navigation State Testing -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                
                <StackPanel Spacing="20">
                    <!-- ?? Section Header with State Icon -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon Glyph="&#xE81C;" 
                                  FontSize="20" 
                                  Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="State Management Testing" 
                                   FontSize="20" 
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                   VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- ?? State Info Display -->
                    <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="6"
                            Padding="16">
                        <StackPanel Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE946;" 
                                          FontSize="16" 
                                          Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                                <TextBlock Text="Navigation State Information" 
                                           FontSize="14" 
                                           FontWeight="SemiBold"
                                           Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                            </StackPanel>
                            
                            <TextBlock x:Name="StateStatus"
                                       Text="Loading state info..."
                                       FontSize="12"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       TextWrapping="Wrap"
                                       Margin="24,0,0,0" />
                        </StackPanel>
                    </Border>

                    <!-- ?? State Management Buttons -->
                    <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
                        <Button x:Name="RefreshStateInfo"
                                Click="RefreshStateInfo_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Padding="16,8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <SymbolIcon Symbol="Refresh" />
                                <TextBlock Text="Refresh State" />
                            </StackPanel>
                        </Button>
                        
                        <Button x:Name="TestNavigationState"
                                Click="TestNavigationState_Click"
                                Style="{ThemeResource AccentButtonStyle}"
                                Padding="16,8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE8A7;" FontSize="16" />
                                <TextBlock Text="Test Edit Form" />
                            </StackPanel>
                        </Button>

                        <Button x:Name="ClearNavigationState"
                                Click="ClearNavigationState_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Padding="16,8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE74D;" FontSize="16" />
                                <TextBlock Text="Clear State" />
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- ?? State Management Instructions -->
                    <muxc:InfoBar Title="How to Test State Management"
                                  Message="Click 'Test Edit Form' ? Fill in some data ? Navigate away ? Return to see your data restored"
                                  Severity="Informational"
                                  IsOpen="True"
                                  IsClosable="False">
                        <muxc:InfoBar.IconSource>
                            <muxc:FontIconSource Glyph="&#xE946;" />
                        </muxc:InfoBar.IconSource>
                    </muxc:InfoBar>
                </StackPanel>
            </Border>

            <!-- 7. Error Simulation & Handling: ERROR SIMULATION SECTION -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                
                <StackPanel Spacing="20">
                    <!-- Section Header with Error Icon -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon Glyph="&#xE7BA;" 
                                  FontSize="20" 
                                  Foreground="{ThemeResource SystemErrorTextColor}" />
                        <TextBlock Text="Error Simulation &amp; Handling" 
                                   FontSize="20" 
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                   VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- Error Log Display -->
                    <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="6"
                            Padding="16">
                        <StackPanel Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE946;" 
                                          FontSize="16" 
                                          Foreground="{ThemeResource SystemErrorTextColor}" />
                                <TextBlock Text="Error Log &amp; Statistics" 
                                           FontSize="14" 
                                           FontWeight="SemiBold"
                                           Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                            </StackPanel>
                            
                            <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                                <TextBlock x:Name="ErrorLogDisplay"
                                           Text="No errors logged yet. Click buttons below to simulate various error conditions."
                                           FontSize="12"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                           TextWrapping="Wrap"
                                           Margin="24,0,0,0" />
                            </ScrollViewer>
                        </StackPanel>
                    </Border>

                    <!-- Error Simulation Buttons -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- File Not Found Error -->
                        <Button x:Name="SimulateFileNotFoundButton"
                                Grid.Row="0" Grid.Column="0"
                                Click="SimulateFileNotFound_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Margin="0,0,4,4"
                                HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE8B7;" FontSize="16" />
                                <TextBlock Text="File Not Found" FontSize="12" />
                            </StackPanel>
                        </Button>

                        <!-- JSON Parsing Error -->
                        <Button x:Name="SimulateJsonErrorButton"
                                Grid.Row="0" Grid.Column="1"
                                Click="SimulateJsonError_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Margin="4,0,0,4"
                                HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE8C8;" FontSize="16" />
                                <TextBlock Text="JSON Parse Error" FontSize="12" />
                            </StackPanel>
                        </Button>

                        <!-- Access Denied Error -->
                        <Button x:Name="SimulateAccessDeniedButton"
                                Grid.Row="1" Grid.Column="0"
                                Click="SimulateAccessDenied_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Margin="0,4,4,4"
                                HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE72E;" FontSize="16" />
                                <TextBlock Text="Access Denied" FontSize="12" />
                            </StackPanel>
                        </Button>

                        <!-- Corrupted Data Error -->
                        <Button x:Name="SimulateCorruptedDataButton"
                                Grid.Row="1" Grid.Column="1"
                                Click="SimulateCorruptedData_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Margin="4,4,0,4"
                                HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE7BA;" FontSize="16" />
                                <TextBlock Text="Corrupted Data" FontSize="12" />
                            </StackPanel>
                        </Button>

                        <!-- Network Error -->
                        <Button x:Name="SimulateNetworkErrorButton"
                                Grid.Row="2" Grid.Column="0"
                                Click="SimulateNetworkError_Click"
                                Style="{ThemeResource DefaultButtonStyle}"
                                Margin="0,4,4,0"
                                HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE968;" FontSize="16" />
                                <TextBlock Text="Network Error" FontSize="12" />
                            </StackPanel>
                        </Button>

                        <!-- Clear Log -->
                        <Button x:Name="ClearErrorLogButton"
                                Grid.Row="2" Grid.Column="1"
                                Click="ClearErrorLog_Click"
                                Style="{ThemeResource AccentButtonStyle}"
                                Margin="4,4,0,0"
                                HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE74D;" FontSize="16" />
                                <TextBlock Text="Clear Log" FontSize="12" />
                            </StackPanel>
                        </Button>
                    </Grid>

                    <!-- Simple File Access Examples -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="?? Simple File Access Examples" 
                                   FontWeight="SemiBold" 
                                   FontSize="14"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Button x:Name="SimpleFileTestButton"
                                    Click="SimpleFileTest_Click"
                                    Style="{ThemeResource DefaultButtonStyle}"
                                    HorizontalAlignment="Stretch">
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <FontIcon Glyph="&#xE8A5;" FontSize="14" />
                                    <TextBlock Text="Try Open Missing File" FontSize="11" />
                                </StackPanel>
                            </Button>

                            <Button x:Name="CreateDeleteTestButton"
                                    Click="CreateDeleteTest_Click"
                                    Style="{ThemeResource DefaultButtonStyle}"
                                    HorizontalAlignment="Stretch">
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <FontIcon Glyph="&#xE8B5;" FontSize="14" />
                                    <TextBlock Text="Create &amp; Delete Test" FontSize="11" />
                                </StackPanel>
                            </Button>

                            <Button x:Name="SafeAccessTestButton"
                                    Click="SafeAccessTest_Click"
                                    Style="{ThemeResource DefaultButtonStyle}"
                                    HorizontalAlignment="Stretch">
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <FontIcon Glyph="&#xE8C7;" FontSize="14" />
                                    <TextBlock Text="Safe Access Check" FontSize="11" />
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>

                    <!-- Error Simulation Instructions -->
                    <muxc:InfoBar Title="Error Simulation Testing"
                                  Message="Click buttons above to simulate different error conditions. Errors are logged to debug output (screen) and saved to 'error_log.txt' file."
                                  Severity="Informational"
                                  IsOpen="True"
                                  IsClosable="False">
                        <muxc:InfoBar.IconSource>
                            <muxc:FontIconSource Glyph="&#xE7BA;" />
                        </muxc:InfoBar.IconSource>
                    </muxc:InfoBar>
                </StackPanel>
            </Border>

            <!-- ?? STATUS SECTION: Native UWP card design -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                
                <StackPanel Spacing="16">
                    <!-- ?? Section Header with Status Icon -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon Glyph="&#xE8BC;" 
                                  FontSize="20" 
                                  Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                        <TextBlock Text="Application Status" 
                                   FontSize="20" 
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                   VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- ?? Status Display with Success Styling -->
                    <Border Background="{ThemeResource SystemFillColorSuccessBrush}"
                            CornerRadius="6"
                            Padding="16">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE73E;" 
                                      FontSize="16" 
                                      Foreground="White" />
                            <StackPanel>
                                <TextBlock Text="All Systems Operational" 
                                           FontSize="14" 
                                           FontWeight="SemiBold"
                                           Foreground="White" />
                                <TextBlock x:Name="StatusDisplay"
                                           Text="Settings are working perfectly!"
                                           FontSize="12"
                                           Foreground="White" />
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- ?? NAVIGATION SECTION -->
            <StackPanel HorizontalAlignment="Center" Margin="0,8,0,24">
                <Button x:Name="BackButton"
                        Click="BackButton_Click"
                        Style="{ThemeResource AccentButtonStyle}"
                        Padding="24,12"
                        CornerRadius="20">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <SymbolIcon Symbol="Back" />
                        <TextBlock Text="Back to Home" FontSize="14" FontWeight="SemiBold" />
                    </StackPanel>
                </Button>
            </StackPanel>
            
        </StackPanel>
    </ScrollViewer>
</Page>